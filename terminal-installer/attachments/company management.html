<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Company Management</title>
    <link href="layout.css" rel="stylesheet" type="text/css">
    <link href="css/ui-lightness/jquery-ui-1.8.16.custom.css" rel="stylesheet" type="text/css">
    <link href="css/jquery.multiselect.css" rel="stylesheet" type="text/css">

    <script language="javascript" type="text/javascript" src="lib/jquery-1.6.4.js"></script>

    <script language="javascript" type="text/javascript" src="lib/jquery-ui-1.8.16.custom.min.js"></script>
    <script language="javascript" type="text/javascript" src="lib/jquery.couch.js"></script>
    <script language="javascript" type="text/javascript" src="lib/couchDBhelpers.js"></script>
    <script language="javascript" type="text/javascript" src="dialogs.js"></script>
    
    <script language="javascript" type="text/javascript" src="lib/underscore.js"></script>
    <script language="javascript" type="text/javascript" src="lib/backbone.js"></script>
    <script language="javascript" type="text/javascript" src="lib/mustache.js"></script>
    <script language="javascript" type="text/javascript" src="lib/ICanHaz.js"></script>

    <script language="javascript" type="text/javascript" src="site.js"></script>

    <script language="javascript" type="text/javascript" src="lib/couch-backbone.js"></script>
    <script language="javascript" type="text/javascript" src="company management.js"></script>
    <script language="javascript" type="text/javascript" src="docRdy.js"></script> <!-- needs to go last -->
    
    <style>
      label, input { display:block; }
      input.text { margin-bottom:12px; width:95%; padding: .4em; }
      fieldset { padding:0; border:0; margin-top:25px; }
      h1 { font-size: 1.2em; margin: .6em 0; }
      i {color: grey;}
      div#users-contain { width: 350px; margin: 20px 0; }
      div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }
      div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }
      .ui-dialog .ui-state-error { padding: .3em; }
      .validateTips { border: 1px solid transparent; padding: 0.3em; }
    </style>


    <!--------------------------------------------------------GENERAL--------------------------------------------------->
    <script id="userpass_P" class="partial" type="text/html">
      <label for="user">Master User ID</label>
      <input type="text" id="user" value="{{user}}" class="text ui-widget-content ui-corner-all" />
      <label for="password">Master Password</label>
      <input type="password"  id="password" value="{{password}}" class="text ui-widget-content ui-corner-all" />
    </script>

    <script id="addressFields_P" class="partial" type="text/html">
      {{#address}}
      <dl>
	<dt>Address</dt>
	<dd>
	  <label for="address.street0">Street 1</label>
	  <input type="text" id="address.street0" value="{{street0}}" class="text ui-widget-content ui-corner-all" />
	  <label for="address.street1">Street 2</label>
	  <input type="text" id="address.street1" value="{{street1}}" class="text ui-widget-content ui-corner-all" />
	  <label for="address.city">City</label>
	  <input type="text" id="address.city" value="{{city}}" class="text ui-widget-content ui-corner-all" />
	  <label for="address.province">State/Province</label>
	  <input type="text" id="address.province" value="{{province}}" class="text ui-widget-content ui-corner-all" />
	  <label for="address.country">Country</label>
	  <input type="text" id="address.country" value="{{country}}" class="text ui-widget-content ui-corner-all" />
	  <label for="address.postalcode">Postal code</label>
	  <input type="text" id="address.postalcode" value="{{postalCode}}" class="text ui-widget-content ui-corner-all" />
	</dd>
      </dl>
      {{/address}}
    </script>

    <script id="contactFields_P" class="partial" type="text/html">
      {{#contact}}
      <dl>
	<dt>Contact</dt>
	<dd>
	  <label for="contact.firstname">First Name</label>
	  <input type="text" id="contact.firstname" value="{{firstName}}" class="text ui-widget-content ui-corner-all" />
	  <label for="contact.lastname">Last Name</label>
	  <input type="text" id="contact.lastname" value="{{lastName}}" class="text ui-widget-content ui-corner-all" />
	  <label for="contact.website">Web site</label>
	  <input type="text" id="contact.website" value="{{website}}" class="text ui-widget-content ui-corner-all" />
	  <label for="contact.email">e-mail</label>
	  <input type="text" id="contact.email" value="{{email}}" class="text ui-widget-content ui-corner-all" />
	  <label for="contact.phone">phone</label>
	  <input type="text" id="contact.phone" value="{{phone}}" class="text ui-widget-content ui-corner-all" />
	</dd>
      </dl>
      {{/contact}}
    </script>

    <script id="breadcrumb_P" class="partial" type="text/html">
      <h2>{{#companyName}}
	<i>Company</i> {{companyName}}
	{{#groupName}}
	- <i>Group</i> {{groupName}}
	{{#storeName}}
	- <i>Store</i> {{storeName}}
	{{#terminalName}}
	- <i>Terminal</i> {{terminalName}}
	{{/terminalName}}
	{{/storeName}}
	{{/groupName}}
	{{/companyName}}
      </h2>
    </script>
    
    <script id="commonButtonClasses_P" class="partial"  type="text/html">
      ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only
    </script>
    
    <script id="backButton_P" class="partial" type="text/html">
      <button class="{{>commonButtonClasses_P}}" role="button" aria-disabled="false" onClick="javascript:history.go(-1);">
	<span class="ui-button-text">Back</span>
      </button>
    </script>

    <script id="menuButton_P" class="partial" type="text/html">
      <button  class="{{>commonButtonClasses_P}}" role="button" aria-disabled="false" 
	       onClick="javascript:window.location.href ='./mainMenus.html';">
	<span class="ui-button-text">Menus</span>
      </button>
    </script>

    <script id="createButton_P" class="partial" type="text/html">
      <button id="create-thing">{{createButtonLabel}}</button>
    </script>

    <script id="editButton_P" class="partial" type="text/html">
      <button id="edit-thing">
	Edit
      </button>
    </script>

    <script id="quickViewButton_P" class="partial" type="text/html">
      <button onclick=quickView("{{template}}","{{company_id}}","{{group_id}}","{{store_id}}","{{terminal_id}}") class="ui-state-default ui-corner-all">
	<span class="ui-button-text">
	  View
	</span>
      </button>
    </script>

    <script id="deleteButton_P" class="partial" type="text/html">
      <button class="ui-state-default ui-corner-all">
	<span class="ui-button-text">
	  Delete
	</span>
      </button>
    </script>

    <script id="quickViewHook_P" class="partial" type="text/html">
      <div id="dialog-quickView" title="QuickView"></div>
    </script>

    <script id="createDialogHook_P" class="partial" type="text/html">
      <div id="create-dialog"></div>
    </script>

    <script id="managementTableHook_P" class="partial" type="text/html">
      <div id="list-things"></div>
    </script>
    
    <!--------------------------------------------------------COMPANY--------------------------------------------------->

    <script id="companiesTabel_TMP" type="text/html">
      <table border="1">
	<tr>
	  <th>Name</th>
	  <th>Operational Name</th>
	  <th># of Groups</th>
	  <th># of Stores</th>
	  <th># of Terminals</th>
	  <th>Creation Date</th>
	  <th>Detail</th>
	  <th>Delete</th>
	</tr>
	{{#list}}
	<tr>
	  <td><a href="#/company/{{company_id}}">{{companyName}}</a></td>
	  <td>{{operationalname}}</td>
	  <td>{{group_num}}</td>
	  <td>{{store_num}}</td>
	  <td>{{terminal_num}}</td>
	  <td>{{creationdate}}</td>
	  <td>{{>quickViewButton_P}}</td>
	  <td>{{>deleteButton_P}}</td>
	</tr>
	{{/list}}
      </table>
      {{>quickViewHook_P}}
    </script>

    <script id="company_management_page_TMP" type="text/html">
      <h1>Company Management</h1>
      {{>managementTableHook_P}}
      {{>createButton_P}}
      {{>menuButton_P}}
      {{>createDialogHook_P}}
    </script>	   
    
    <script id="companyForm_P" class="partial" type="text/html">
      {{#company}}
      <form>
	<fieldset>
	  <label for="company-name">Company name</label>
	  <input type="text" id="company-name" value="{{companyName}}" class="text ui-widget-content ui-corner-all" />
	  <label for="operationalname">Operational Name</label>
	  <input type="text" id="operationalname" value="{{operationalname}}" class="text ui-widget-content ui-corner-all" />
	  {{>userpass_P}}
	  {{>addressFields_P}}
	  {{>contactFields_P}}
	</fieldset>
      </form>
      {{/company}}
    </script>

    <script id="companyInputDialog_TMP" type="text/html">
      <div id="dialog-form" title="{{title}}">
	<p class="validateTips"></p>
	{{>companyForm_P}}
      </div>	
    </script>

    <script id="modify_company_page_TMP" type="text/html">
      <table border="1">
	<h1>Modify Company</h1>
	{{>breadcrumb_P}}
	{{>companyForm_P}}

	{{>editButton_P}}
	{{>backButton_P}}
	{{>menuButton_P}}
	<button class="ui-button ui-button-text-only ui-widget ui-state-default ui-corner-all"
		onClick="javascript:window.location.href ='#/company/{{company_id}}/groups';">
	  <span class="ui-button-text">Groupe Manager</span>
	</button>
      </table>
      <div id="dialog-hook"></div>
    </script>   

    <!--------------------------------------------------------GROUP--------------------------------------------------->

    <script id="groupsTabel_TMP" type="text/html">
      <table border="1">
	<tr>
	  <th>Name</th>
	  <th># of Stores</th>
	  <th># of Terminals</th>
	  <th>Creation Date</th>
	  <th>Details</th>
	  <th>Delete</th>
	</tr>
	{{#list}}
	<tr>
	  <td><a href="#/company/{{company_id}}/groups/{{group_id}}">{{groupName}}</a></td>
	  <td>{{store_num}}</td>
	  <td>{{terminal_num}}</td>
	  <td>{{creationdate}}</td>
	  <td>{{>quickViewButton_P}}</td>
	  <td>{{>deleteButton_P}}</td>
	</tr>
	{{/list}}
      </table>
      {{>quickViewHook_P}}
    </script>

    <script id="group_management_page_TMP" type="text/html">
      <h1>Group Management</h1>
      {{>breadcrumb_P}}
      {{>managementTableHook_P}}
      {{>createButton_P}}
      {{>backButton_P}}
      {{>menuButton_P}}
      {{>createDialogHook_P}}
    </script>

    <script id="groupForm_P" class="partial" type="text/html">
      {{#group}}
      <form>
	<fieldset>
	  <label for="group-name">Group Name</label>
	  <input type="text" id="group-name" value="{{groupName}}" class="text ui-widget-content ui-corner-all" />
	  {{>userpass_P}}
	  {{>addressFields_P}}
	  {{>contactFields_P}}
	</fieldset>
      </form>
      {{/group}}
    </script>

    <script id="groupInputDialog_TMP" type="text/html">
      <div id="dialog-form" title="{{title}}">
	<p class="validateTips"></p>
	{{>groupForm_P}}
      </div>
    </script>

    <script id="modify_group_page_TMP" type="text/html">
      <table border="1">
	<h1>Modify Group</h1>
	{{>breadcrumb_P}}
	{{>groupForm_P}}
	{{>editButton_P}}
	{{>backButton_P}}
	{{>menuButton_P}}
	<button class="ui-button ui-button-text-only ui-widget ui-state-default ui-corner-all"
		onClick="javascript:window.location.href ='#/company/{{company_id}}/groups/{{group_id}}/stores';">
	  <span class="ui-button-text">Store Manager</span>
	</button>
      </table>
      <div id="dialog-hook"></div>
    </script>   

    <!--------------------------------------------------------STORES--------------------------------------------------->

    <script id="storeForm_P" class="partial" type="text/html">
      {{#store}}
      <form>
	<fieldset>
	  <label for="store-name">Store name</label>
	  <input type="text" id="store-name" value="{{storeName}}" class="text ui-widget-content ui-corner-all" />
	  <label for="store-num">Store num</label>
	  <input type="text" id="store-num" value="{{number}}" class="text ui-widget-content ui-corner-all" />
	  {{>userpass_P}}
	  {{>addressFields_P}}
	  {{>contactFields_P}}
	</fieldset>
      </form>
      {{/store}}
    </script>

    <script id="storesTabel_TMP" type="text/html">
      <table border="1">
	<tr>
	  <th>Name</th>
	  <th>Number</th>
	  <th># of Terminals</th>
	  <th>Creation Date</th>
	  <th>Details</th>
	  <th>Delete</th>
	</tr>
	{{#list}}
	<tr>
	  <td><a href="#/company/{{company_id}}/groups/{{group_id}}/stores/{{store_id}}">{{storeName}}</a></td>
	  <td>{{number}}</td>
	  <td>{{terminal_num}}</td>
	  <td>{{creationdate}}</td>
	  <td>{{>quickViewButton_P}}</td>
	  <td>{{>deleteButton_P}}</td>
	</tr>
	{{/list}}
      </table>
      {{>quickViewHook_P}}
    </script>

    <script id="storeInputDialog_TMP" type="text/html">
      <div id="dialog-form" title="{{title}}">
	<p class="validateTips"></p>
	{{>storeForm_P}}
      </div>
    </script>  

    <script id="store_management_page_TMP" type="text/html">
      <h1>Stores Management</h1>
      {{>breadcrumb_P}}
      {{>managementTableHook_P}}
      {{>createButton_P}}
      {{>backButton_P}}
      {{>menuButton_P}}
      {{>createDialogHook_P}}
    </script>

    <script id="modify_store_page_TMP" type="text/html">
      <table border="1">
	<h1>Modify Store</h1>
	{{>breadcrumb_P}}
	{{>storeForm_P}}
	{{>editButton_P}}
	{{>backButton_P}}
	{{>menuButton_P}}
	<button class="ui-button ui-button-text-only ui-widget ui-state-default ui-corner-all"
		onClick="javascript:window.location.href ='#/company/{{company_id}}/groups/{{group_id}}/stores/{{store_id}}/terminals';">
	  <span class="ui-button-text">Terminal Manager</span>
	</button>
      </table>
      <div id="dialog-hook"></div>
    </script>   

    <!--------------------------------------------------------TERMINALS--------------------------------------------------->

    <script id="terminalFrom_P" class="partial" type="text/html">
      {{#terminal}}	
      <form>
	<fieldset>
	  <label for="terminal-id">Terminal ID</label>
	  <input type="text" id="terminal-id" value="{{id}}" class="text ui-widget-content ui-corner-all" />
	  <label for="companyCode">Company Code</label>
	  <input type="text" id="companyCode" value="{{companyCode}}" class="text ui-widget-content ui-corner-all" />
	  <label for="storeCode">Store Code</label>
	  <input type="text" id="storeCode" value="{{storeCode}}" class="text ui-widget-content ui-corner-all" />
	  <label for="areaCode">Area Code</label>
	  <input type="text" id="areaCode" value="{{areaCode}}" class="text ui-widget-content ui-corner-all" />
	  <label for="cityCode">City Code</label>
	  <input type="text" id="cityCode" value="{{cityCode}}"  class="text ui-widget-content ui-corner-all" />
	  <label for="countryCode">Country Code</label>
	  <input type="text" id="countryCode" value="{{countryCode}}" class="text ui-widget-content ui-corner-all" />
	  <label for="postalCode">Postal Code</label>
	  <input type="text" id="postalCode" value="{{postalCode}}" class="text ui-widget-content ui-corner-all" />
	</fieldset>
      </form>
      {{/terminal}}
    </script>

    <script id="terminalsTabel_TMP" type="text/html">
      <table border="1">
	<tr>
	  <th>ID</th>
	  <th>Installed</th>
	  <th>Creation Date</th>
	  <th>Details</th>
	</tr>
	{{#list}}
	<tr>
	  <td><a href="#/company/{{company_id}}/groups/{{group_id}}/stores/{{store_id}}/terminals/{{terminal_id}}">{{id}}</a></td>
	  <td>{{installed}}</td>
	  <td>{{creationdate}}</td>
	  <td>{{>quickViewButton_P}}</td>
	</tr>
	{{/list}}
      </table>
      {{>quickViewHook_P}}
    </script>

    <script id="terminalInputDialog_TMP" type="text/html">
      <div id="dialog-form" title="{{title}}">
	<p class="validateTips"></p>
	{{>terminalFrom_P}}
      </div>
    </script>

    <script id="terminal_management_page_TMP" type="text/html">
      <h1>Terminals Management</h1>
      {{>breadcrumb_P}}
      {{>managementTableHook_P}}
      {{>createButton_P}}
      {{>backButton_P}}
      {{>menuButton_P}}
      {{>createDialogHook_P}}
    </script>

    <script id="modify_terminal_page_TMP" type="text/html">
      <table border="1">
	<h1>Modify Terminal</h1>
	{{>breadcrumb_P}}
	{{>terminalFrom_P}}
	{{>editButton_P}}
	{{>backButton_P}}
	{{>menuButton_P}}
	<button id="install_terminal" 
		class="ui-button ui-button-text-only ui-widget ui-state-default ui-corner-all">
	  <span class="ui-button-text">Install</span>
	</button>
      </table>
      <div id="dialog-hook"></div>
    </script> 
  </head>
  <body></body>
</html>
