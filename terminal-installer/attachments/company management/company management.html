<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>Company Management</title>
      <link href="../layout.css" rel="stylesheet" type="text/css" />
      <link href="../css/ui-lightness/jquery-ui-1.8.16.custom.css" rel="stylesheet" type="text/css" />
      
      <script language="javascript" type="text/javascript" src="../lib/jquery-1.7.1.js"></script>
      <script language="javascript" type="text/javascript" src="../lib/jquery.timers-1.0.0.js.txt"></script>
      <script language="javascript" type="text/javascript" src="../lib/json2.js"></script>
      <script language="javascript" type="text/javascript" src="../lib/date.js"></script>
      
      <script language="javascript" type="text/javascript" src="../lib/jquery-ui-1.8.16.custom.min.js"></script>
      <script language="javascript" type="text/javascript" src="../lib/jquery.couch.js"></script>
      <script language="javascript" type="text/javascript" src="../lib/couchDBhelpers.js"></script>
      <script language="javascript" type="text/javascript" src="../company management/dialogs.js"></script>
      
      <script language="javascript" type="text/javascript" src="../lib/underscore.js"></script>
      <script language="javascript" type="text/javascript" src="../lib/underscore.string.js"></script>
      <script language="javascript" type="text/javascript" src="../lib/underscore_extended.js"></script>
      <script language="javascript" type="text/javascript" src="../lib/backbone.js"></script>
      <script language="javascript" type="text/javascript" src="../lib/mustache.js"></script>
      <script language="javascript" type="text/javascript" src="../lib/ICanHaz-no-mustache.js"></script>
      <script language="javascript" type="text/javascript" src="../site.js"></script>
      
      <script language="javascript" type="text/javascript" src="../lib/couch-backbone.js"></script>

      <script language="javascript" type="text/javascript" src="../company management/sample_terminal.js"></script>
      <script language="javascript" type="text/javascript" src="../lib/Company.js"></script>
      <script language="javascript" type="text/javascript" src="../lib/Rewards.js"></script>
      <script language="javascript" type="text/javascript" src="../company management/rewards_helpers.js"></script>
      <script language="javascript" type="text/javascript" src="../company management/company management.js"></script>
      <script language="javascript" type="text/javascript" src="../company management/installTerminal.js"></script>
      <script language="javascript" type="text/javascript" src="../lib/Menu.js"></script>
      <script language="javascript" type="text/javascript" src="../company management/docRdy.js"></script> <!-- needs to go last -->
      
      <style>
	label, input { display:block; }
	input.text { margin-bottom:12px; width:95%; padding: .4em; }
	fieldset { padding:0; border:0; margin-top:25px; }
	i {color: gray;}
	div#users-contain { width: 350px; margin: 20px 0; }
	div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }
	div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }
	.ui-dialog .ui-state-error { padding: .3em; }
	.validateTips { border: 1px solid transparent; padding: 0.3em; }
      </style>
      
      
      <!--------------------------------------------------------GENERAL--------------------------------------------------->
      
      <script id="commonClasses_P" class="partial" type="text/html">
	text ui-widget-content ui-corner-all
      </script>
      
      
      <script id="userpass_P" class="partial" type="text/html">
	<label for="user">Master User ID</label>
	<input type="text" id="user" value="{{user}}" class="text ui-widget-content ui-corner-all" />
	<label for="password">Master Password</label>
	<input type="text"  id="password" value="{{password}}" class="text ui-widget-content ui-corner-all" />
      </script>
      
      <script id="addressFields_P" class="partial" type="text/html">
	{{#address}}
	<h2>Address</h2>
	<label for="address.street0">Address 1</label>
	<input type="text" id="address.street0" value="{{street0}}" class="text ui-widget-content ui-corner-all" />
	<label for="address.street1">Address 2</label>
	<input type="text" id="address.street1" value="{{street1}}" class="text ui-widget-content ui-corner-all" />
	<label for="address.city">City</label>
	<input type="text" id="address.city" value="{{city}}" class="text ui-widget-content ui-corner-all" />
	<label for="address.province">State/Province</label>
	<input type="text" id="address.province" value="{{province}}" class="text ui-widget-content ui-corner-all" />
	<label for="address.postalcode">Postal Code</label>
	<input type="text" id="address.postalcode" value="{{postalcode}}" class="text ui-widget-content ui-corner-all" />
	<label for="address.country">Country</label>
	<input type="text" id="address.country" value="{{country}}" class="text ui-widget-content ui-corner-all" />
	{{/address}}
      </script>
      
      <script id="contactFields_P" class="partial" type="text/html">
	{{#contact}}
	<h2>Contact</h2>
	<label for="contact.firstname">First Name</label>
	<input type="text" id="contact.firstname" value="{{firstname}}" class="text ui-widget-content ui-corner-all" />
	<label for="contact.lastname">Last Name</label>
	<input type="text" id="contact.lastname" value="{{lastname}}" class="text ui-widget-content ui-corner-all" />
	<label for="contact.website">Website</label>
	<input type="text" id="contact.website" value="{{website}}" class="text ui-widget-content ui-corner-all" />
	<label for="contact.email">E-mail</label>
	<input type="text" id="contact.email" value="{{email}}" class="text ui-widget-content ui-corner-all" />
	<label for="contact.phone">Phone</label>
	<input type="text" id="contact.phone" value="{{phone}}" class="text ui-widget-content ui-corner-all" />
	{{/contact}}
      </script>
      
      <script id="breadcrumb_P" class="partial" type="text/html">
	<h2>{{#companyName}}
	  <i>Company</i> {{companyName}}
	  {{#groupName}}
	  - <i>Group</i> {{groupName}}
	  {{#storeName}}
	  - <i>Store</i> {{storeName}}({{storeNumber}})
	  {{#terminalName}}
	  - <i>Terminal</i> {{terminalName}}
	  {{/terminalName}}
	  {{/storeName}}
	  {{/groupName}}
	  {{/companyName}}
	</h2>
      </script>
      
      <script id="commonButtonClasses_P" class="partial"  type="text/html">
	ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only
      </script>
      
      <script id="backButton_P" class="partial" type="text/html">
	<button class="{{>commonButtonClasses_P}}" role="button" aria-disabled="false" onClick="javascript:history.go(-1);">
	  <span class="ui-button-text">Back</span>
	</button>
      </script>
      
      <script id="menuButton_P" class="partial" type="text/html">
	<button  class="{{>commonButtonClasses_P}}" role="button" aria-disabled="false" 
		 onClick="javascript:window.location.href ='../mainMenus.html';">
	  <span class="ui-button-text">Main Menu</span>
	</button>
      </script>
      
      <script id="createButton_P" class="partial" type="text/html">
	<button id="create-thing">{{createButtonLabel}}</button>
      </script>
      
      <script id="editButton_P" class="partial" type="text/html">
	<button id="edit-thing">
	  Edit
	</button>
      </script>
      
      <script id="quickViewButton_P" class="partial" type="text/html">
	<button onclick=quickView("{{template}}","{{company_id}}","{{group_id}}","{{store_id}}","{{terminal_id}}") class="ui-state-default ui-corner-all">
	  <span class="ui-button-text">
	    View
	  </span>
	</button>
      </script>
      
      <script id="deleteButton_P" class="partial" type="text/html">
	<button onclick=deleteThing("{{company_id}}","{{group_id}}","{{store_id}}") class="ui-state-default ui-corner-all">
	  <span class="ui-button-text">
	    Delete
	  </span>
	</button>
      </script>
      
      <script id="quickViewHook_P" class="partial" type="text/html">
	<div id="dialog-quickView" title="QuickView"></div>
      </script>
      
      <script id="createDialogHook_P" class="partial" type="text/html">
	<div id="create-dialog"></div>
      </script>
      
      <script id="managementTableHook_P" class="partial" type="text/html">
	<div id="list-things"></div>
      </script>
      
      <!--------------------------------------------------------DIALOG--------------------------------------------------->
      
      <script id="tips_TMP" type="text/html">
	<ol>
	  {{#tips}}
	  <li>{{.}}</li>
	  {{/tips}}
	</ol>
      </script>
      
      <!--------------------------------------------------------COMPANY--------------------------------------------------->
      
      <script id="companiesTabel_TMP" type="text/html">
	<table class="reportstable">
	  <thead>
	    <tr>
	      <th>Name</th>
	      <th>Operational Name</th>
	      <th># of Groups</th>
	      <th># of Stores</th>
	      <th># of Terminals</th>
	      <th>Creation Date</th>
	      <th>Detail</th>
	      <th>Delete</th>
	    </tr>
	  </thead>
	  <tbody>
	    {{#list}}
	    <tr>
	      <td><a href="#/company/{{company_id}}">{{companyName}}</a></td>
	      <td>{{operationalname}}</td>
	      <td>{{group_num}}</td>
	      <td>{{store_num}}</td>
	      <td>{{terminal_num}}</td>
	      <td>{{creationdate}}</td>
	      <td>{{>quickViewButton_P}}</td>
	      <td>{{>deleteButton_P}}</td>
	    </tr>
	    {{/list}}
	  </tbody>
	</table>
	{{>quickViewHook_P}}
      </script>
      
      <script id="company_management_page_TMP" type="text/html">
	<h1>Company Management</h1>
	{{>createButton_P}}
	{{>menuButton_P}}
	<hr/>
	{{>managementTableHook_P}}
	{{>createDialogHook_P}}
      </script>	   
      
      <script id="companyForm_P" class="partial" type="text/html">
	{{#company}}
	<form id="form">
	  <h2>Company Info</h2>
	  <label for="company-name">Company name</label>
	  <input type="text" id="company-name" value="{{companyName}}" class="text ui-widget-content ui-corner-all" />
	  <label for="operationalname">Operational Name</label>
	  <input type="text" id="operationalname" value="{{operationalname}}" class="text ui-widget-content ui-corner-all" />
	  {{>userpass_P}}
	  <table width="100%" border="0" cellspacing="0" cellpadding="0">
	    <tbody>
	      <tr>
		<td valign="top">{{>addressFields_P}}</td>
		<td valign="top">{{>contactFields_P}}</td>
	      </tr>
	    </tbody>
	  </table>
	</form>
	{{/company}}
      </script>

      <script id="companyForm_TMP" type="text/html">
	{{>companyForm_P}}
      </script>
      
      <script id="companyInputDialog_TMP" type="text/html">
	<div id="dialog-form" title="{{title}}">
	  <p class="validateTips"></p>
	  {{>companyForm_P}}
	</div>	
      </script>
      
      <script id="modify_company_page_TMP" type="text/html">
	<table class="reportstable">
	  <h1>Modify Company</h1>
	  {{>breadcrumb_P}}
	  <button class="ui-button ui-button-text-only ui-widget ui-state-default ui-corner-all"
		  onClick="javascript:window.location.href ='#/company/{{company_id}}/groups';">
	    <span class="ui-button-text">Group Manager</span>
	  </button>
	  {{>editButton_P}}
	  <button id="btnModifyRewards" class="ui-button ui-button-text-only ui-widget ui-state-default ui-corner-all">
	    <span class="ui-button-text">Modify Rewards</span>
	  </button>
	  {{>backButton_P}}
	  {{>menuButton_P}}
	</table>
	{{>companyForm_P}}
	<div id="dialog-hook"></div>
	<div id="dialog-hook-forRewards"></div>
      </script>   
      
      <!----------------------------- company : modify reward -------------------------------------->
      
      <script id="modifyRewardDropdownbox_P" class="partial" type="text/html">
	<ul>
	  <li>Reward Program :  
	    <select id="rewardsdown" class="{{>commonClasses_P}}">
	      <option value = "none" selected>     </option>
	      <option value = "mobqredits">MobQredits</option>
	      <option value = "qriket">Qriket</option>
	    </select>
	  </li>
	</ul>
      </script>
      
      <script id="companyModifyRewardsDialog_TMP" type="text/html">
	<div id="dialog-form-forRewards">
  	  <form id="form_forRewards">
	    {{>modifyRewardDropdownbox_P}}
	    <hr />
	    {{#MobQredits}}
	    <input type="hidden" style="border: 0" class="menuButtonToggle" var="use_mobqredits" id="use_mobqredits" {{#use_mobqredits}}checked=true{{/use_mobqredits}} />
	    <label for="mobqredits_conversion">MobQredits Conversion: </label>			
	    <input type="text" maxlength="10" size="10" var="mobqredits_conversion" id="mobqredits_conversion" value="{{mobqredits_conversion}}"/>  
	    
	    <input type="hidden" style="border: 0" class="menuButtonToggle" var="use_qriket" id="use_qriket" {{#use_qriket}}checked=true{{/use_qriket}} />
	    <label for="qriket_conversion">Qriket Conversion: </label>			
	    <input type="text" maxlength="10" size="10" var="qriket_conversion" id="qriket_conversion" value="{{qriket_conversion}}"/>
	    {{/MobQredits}}
	  </form>
	</div>
      </script>
      
      <!--------------------------------------------------------GROUP--------------------------------------------------->
      
      <script id="groupsTabel_TMP" type="text/html">
	<table class="reportstable">
	  <thead>
	    <tr>
	      <th>Name</th>
	      <th># of Stores</th>
	      <th># of Terminals</th>
	      <th>Creation Date</th>
	      <th>Details</th>
	      <th>Delete</th>
	    </tr>
	  </thead>
	  <tbody>
	    {{#list}}
	    <tr>
	      <td><a href="#/company/{{company_id}}/groups/{{group_id}}">{{groupName}}</a></td>
	      <td>{{store_num}}</td>
	      <td>{{terminal_num}}</td>
	      <td>{{creationdate}}</td>
	      <td>{{>quickViewButton_P}}</td>
	      <td>{{>deleteButton_P}}</td>
	    </tr>
	    {{/list}}
	  </tbody>
	</table>
	{{>quickViewHook_P}}
      </script>
      
      <script id="group_management_page_TMP" type="text/html">
	<h1>Group Management</h1>
	{{>breadcrumb_P}}
	{{>createButton_P}}
	{{>backButton_P}}
	{{>menuButton_P}}
	<hr/>
	{{>managementTableHook_P}}
	{{>createDialogHook_P}}
      </script>
      
      <script id="groupForm_P" class="partial" type="text/html">
	{{#group}}
	<form id="form">
	  <label for="group-name">Group Name</label>
	  <input type="text" id="group-name" value="{{groupName}}" class="text ui-widget-content ui-corner-all" />
	  {{>userpass_P}}
	  <table width="100%" border="0" cellspacing="0" cellpadding="0">
	    <tr>
	      <td valign="top">{{>addressFields_P}}</td>
	      <td valign="top">{{>contactFields_P}}</td>
	    </tr>
	  </table>
	</form>
	{{/group}}
      </script>

      <script id="groupForm_TMP" type="text/html">
	{{>groupForm_P}}
      </script>

      <script id="groupInputDialog_TMP" type="text/html">
	<div id="dialog-form" title="{{title}}">
	  <p class="validateTips"></p>
	  {{>groupForm_P}}
	</div>
      </script>
      
      <script id="modify_group_page_TMP" type="text/html">
	<table class="reportstable">
	  <h1>Modify Group</h1>
	  {{>breadcrumb_P}}
	  <button class="ui-button ui-button-text-only ui-widget ui-state-default ui-corner-all"
		  onClick="javascript:window.location.href ='#/company/{{company_id}}/groups/{{group_id}}/stores';">
	    <span class="ui-button-text">Store Manager</span>
	  </button>
	  {{>editButton_P}}
	  {{>backButton_P}}
	  {{>menuButton_P}}
	</table>
	{{>groupForm_P}}
	<div id="dialog-hook"></div>
      </script>   
      
      <!--------------------------------------------------------STORES--------------------------------------------------->
      
      <script id="storeForm_P" class="partial" type="text/html">
	{{#store}}
	<form id="form">
	  <label for="store-name">Store Name</label>
	  <input type="text" id="store-name" value="{{storeName}}" class="text ui-widget-content ui-corner-all" />
	  <label for="store-num">Store Number</label>
	  <input type="text" id="store-num" value="{{number}}" class="text ui-widget-content ui-corner-all" />
	  {{>userpass_P}}
	  <table width="100%" border="0" cellspacing="0" cellpadding="0">
	    <tbody>
	      <tr>
		<td valign="top">{{>addressFields_P}}</td>
		<td valign="top">{{>contactFields_P}}</td>
	      </tr>
	    </tbody>
	  </table>
	</form>
	{{/store}}
      </script>

      <script id="storeForm_TMP" type="text/html">
	{{>storeForm_P}}
      </script>
      
      <script id="storesTabel_TMP" type="text/html">
	<table class="reportstable">
	  <thead>
	    <tr>
	      <th>Name</th>
	      <th>Number</th>
	      <th># of Terminals</th>
	      <th>Creation Date</th>
	      <th>Details</th>
	      <th>Delete</th>
	    </tr>
	  </thead>
	  <tbody>
	    {{#list}}
	    <tr>
	      <td><a href="#/company/{{company_id}}/groups/{{group_id}}/stores/{{store_id}}">{{storeName}}</a></td>
	      <td>{{number}}</td>
	      <td>{{terminal_num}}</td>
	      <td>{{creationdate}}</td>
	      <td>{{>quickViewButton_P}}</td>
	      <td>{{>deleteButton_P}}</td>
	    </tr>
	    {{/list}}
	  </tbody>
	</table>
	{{>quickViewHook_P}}
      </script>
      
      <script id="storeInputDialog_TMP" type="text/html">
	<div id="dialog-form" title="{{title}}">
	  <p class="validateTips"></p>
	  {{>storeForm_P}}
	</div>
      </script>  
      
      <script id="store_management_page_TMP" type="text/html">
	<h1>Stores Management</h1>
	{{>breadcrumb_P}}
	{{>createButton_P}}
	{{>backButton_P}}
	{{>menuButton_P}}
	<hr/>
	{{>managementTableHook_P}}
	
	{{>createDialogHook_P}}
      </script>
      
      <script id="modify_store_page_TMP" type="text/html">
	<table class="reportstable">
	  <h1>Modify Store</h1>
	  {{>breadcrumb_P}}
	  <button class="ui-button ui-button-text-only ui-widget ui-state-default ui-corner-all"
		  onClick="javascript:window.location.href ='#/company/{{company_id}}/groups/{{group_id}}/stores/{{store_id}}/terminals';">
	    <span class="ui-button-text">Terminal Manager</span>
	  </button>
	  {{>editButton_P}}
	  {{>backButton_P}}
	  {{>menuButton_P}}
	</table>
	{{>storeForm_P}}
	<div id="dialog-hook"></div>
      </script>   
      
      <!--------------------------------------------------------TERMINALS--------------------------------------------------->
      
      <script id="terminalForm_P" class="partial" type="text/html">
	{{#terminal}}	
	<form id="form">
	  <label for="terminal-id">Terminal ID</label>
	  <input type="text" id="terminal-id" value="{{terminal_label}}" class="text ui-widget-content ui-corner-all" />
	  <label for="companyCode">Company Code</label>
	  <input type="text" id="companyCode" value="{{companyCode}}" class="text ui-widget-content ui-corner-all" />
	  <label for="storeCode">Store Code</label>
	  <input type="text" id="storeCode" value="{{storeCode}}" class="text ui-widget-content ui-corner-all" />
	  <label for="areaCode">Area Code</label>
	  <input type="text" id="areaCode" value="{{areaCode}}" class="text ui-widget-content ui-corner-all" />
	  <label for="cityCode">City Code</label>
	  <input type="text" id="cityCode" value="{{cityCode}}"  class="text ui-widget-content ui-corner-all" />
	  <label for="countryCode">Country Code</label>
	  <input type="text" id="countryCode" value="{{countryCode}}" class="text ui-widget-content ui-corner-all" />
	  <label for="postalCode">Postal Code</label>
	  <input type="text" id="postalCode" value="{{postalCode}}" class="text ui-widget-content ui-corner-all" />
	</form>
	{{/terminal}}
      </script>

      <script id="terminalForm_TMP" type="text/html">
	{{>terminalForm_P}}
      </script>
      
      <script id="terminalsTabel_TMP" type="text/html">
	<table class="reportstable">
	  <thead>
	    <tr>
	      <th>ID</th>
	      <th>Installed</th>
	      <th>Creation Date</th>
	      <th>Details</th>
	    </tr>
	  </thead>
	  <tbody>
	    {{#list}}
	    <tr>
	      <td><a href="#/company/{{company_id}}/groups/{{group_id}}/stores/{{store_id}}/terminals/{{terminal_id}}">{{terminal_label}}</a></td>
	      <td>{{installed}}</td>
	      <td>{{creationdate}}</td>
	      <td>{{>quickViewButton_P}}</td>
	    </tr>
	    {{/list}}
	  </tbody>
	</table>
	{{>quickViewHook_P}}
      </script>
      
      <script id="terminalInputDialog_TMP" type="text/html">
	<div id="dialog-form" title="{{title}}">
	  <p class="validateTips"></p>
	  {{>terminalForm_P}}
	</div>
      </script>
      
      <script id="terminal_management_page_TMP" type="text/html">
	<h1>Terminals Management</h1>
	{{>breadcrumb_P}}
	{{>createButton_P}}
	{{>backButton_P}}
	{{>menuButton_P}}
	<hr/>
	{{>managementTableHook_P}}
	
	{{>createDialogHook_P}}
      </script>
      
      <script id="modify_terminal_page_TMP" type="text/html">
	<table class="reportstable">
	  <h1>Modify Terminal</h1>
	  {{>breadcrumb_P}}
	  <button id="install_terminal" class="{{>commonButtonClasses_P}}"
		  onClick="javascript:installTerminal('{{company_id}}','{{group_id}}','{{store_id}}','{{terminal_id}}');">
	    <span class="ui-button-text">Set for Installation</span>
	  </button>
	  {{>editButton_P}}
	  {{>backButton_P}}
	  {{>menuButton_P}}
	</table>
	{{>terminalForm_P}}
	<div id="dialog-hook"></div>
      </script> 
    </head>
    <body>
      <div style="width:1000px;margin:20px auto;padding:0px;background-color:transparent;font-size:13px;font-weight:bold;text-align:center;">
	<img src="../images/logo.png"/>
      </div>
      <div style="width:1000px;margin:20px auto;padding:20px;background-color:#fff;font-size:13px;font-weight:bold;border-radius:20px;">
	<div id="main"></div>
      </div>
      <div id="timespace" style="width:1000px;margin:0 auto; color:#666;text-align:center;">
    	<script>document.write((new Date()).toLocaleDateString() + " / " + (new Date()).toLocaleTimeString())</script>
      </div>
      <div class="footer">
	<div class="footerin">
	  &copy; 2012 RT7 Incorporated.
	  <img src="../images/rt7.png" style="float:right;"/>
	</div>
      </div>
    </body>
  </html>
